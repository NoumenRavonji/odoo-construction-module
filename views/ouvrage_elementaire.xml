<?xml version="1.0" encoding="UTF-8"?>
<openerp>
    <data>
    	<record id="gent_ouvrage_elementaire_form" model="ir.ui.view">
			<field name="name">gent.ouvrage.elementaire.form</field>
			<field name="model">gent.ouvrage.elementaire</field>
			<field name="arch" type="xml">
				<form string="Ouvrage élémentaire">
                                    <group>
								<!-- <field name="excel_file"/>
								<button name="import_excel" type="object" string="Importer"/> -->
                                            <field name="product_id" domain="[('gent_type', '=', 'ouvrage_elementaire')]"  />
                                            <field name="product_uom_qty" invisible="1"/>
                                            <field name="product_uom" />
                                            <field name="price_unit" invisible="1"/>
                                            <field name="prix_debourse" />
                                            <field name="rendement" />
                                    </group>

                                    <label for="materiaux_line"/>
				                    <field name="materiaux_line" widget="one2many_list" >
				                          <tree string="Détails Main d'oeuvre" editable="bottom">
				                            <field name="product_id" domain="[('gent_type', '=', 'composant_materiaux')]"/>
				                                <field name="product_uom" />
				                                <field name="product_uom_qty" />
				                                <field name="price_unit" />
				                                <field name="price_subtotal" />

				                          </tree>

				                    </field>

				                     <label for="materiel_line"/>
				                        <field name="materiel_line" widget="one2many_list" >
				                              <tree string="Détails Main d'oeuvre" editable="bottom">
				                                <field name="product_id" domain="[('gent_type', '=', 'composant_materiel')]" />
				                                <field name="product_uom" />
				                                <field name="product_uom_qty" />
				                                <field name="price_unit" />
				                                <field name="price_subtotal" />

				                              </tree>

				                        </field>

				                     <label for="mo_line"/>
				                        <field name="mo_line" widget="one2many_list" >
				                              <tree string="Détails Main d'oeuvre" editable="bottom">
				                                <field name="product_id" domain="[('gent_type', '=', 'composant_main_d_oeuvre')]"/>
				                                <field name="product_uom" />
				                                <field name="product_uom_qty" />
				                                <field name="price_unit" />
				                                <field name="price_subtotal" />

				                              </tree>

                        				</field> 
                        			<label for="epi_line"/>
				                        <field name="epi_line" widget="one2many_list" >
				                              <tree string="Détails EPI" editable="bottom">
				                                <field name="product_id" domain="[('gent_type', '=', 'epi')]"/>
				                                <field name="product_uom" />
				                                <field name="product_uom_qty" />
				                                <field name="price_unit" />
				                                <field name="price_subtotal" />

				                              </tree>

                        				</field> 
                        				
                        			<label for="autres_charges_line"/>
				                        <field name="autres_charges_line" widget="one2many_list" >
				                              <tree string="Détails autres charges" editable="bottom">
				                                <field name="product_id" domain="[('gent_type', '=', 'autres_charges')]"/>
				                                <field name="product_uom" />
				                                <field name="product_uom_qty" />
				                                <field name="price_unit" />
				                                <field name="price_subtotal" />

				                              </tree>

                        				</field> 
                        
                                </form>
            
			</field>
		</record>

		<record model="ir.actions.act_window" id="ouvrage_elementaire_list_action">
            <field name="name">Ouvrage élémentaire</field>
            <field name="res_model">gent.ouvrage.elementaire</field>
            <field name="view_type">form</field>
			<field name="view_mode">tree,form</field>
			<!-- <field name="view_id" ref="gent_ouvrage_elementaire_form"/> -->
            <field name="help" type="html">
                <p class="oe_view_nocontent_create">Créer un ouvrage élémentaire
                </p>
            </field>
        </record>

        <menuitem id="ouvrage_elementaire_menu" name="Ouvrage élémentaire" parent="gent_devis_menu"
                  action="ouvrage_elementaire_list_action"/>

         

    </data>
</openerp>